System.register("chunks:///_virtual/LevelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,a,l,r,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,o=e.Node,c=e.Component}],execute:function(){var s,u,v,p,h,f,b,y,m,g;l._RF.push({},"55f924/599MK53Jc8cLiohB","LevelManager",void 0);var L=r.ccclass,d=r.property;e("LevelManager",(s=L("LevelManager"),u=d({type:o}),v=d({type:o}),p=d({type:o}),s(((g=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"mainGame",b,a(t)),i(t,"levelSelect",y,a(t)),i(t,"buttonBack",m,a(t)),t.levels=void 0,t}n(t,e),t.GetInstance=function(){return this.instance};var l=t.prototype;return l.onLoad=function(){t.instance=this,this.CreateLevel()},l.start=function(){},l.OpenLevel=function(){this.levelSelect.active=!1,this.mainGame.active=!0,this.buttonBack.active=!1},l.BackToLevelSelection=function(){this.levelSelect.active=!0,this.mainGame.active=!1,this.buttonBack.active=!0},l.CreateLevel=function(){this.levels=[];this.levels.push({startPoint:[4,1],path:[[4,2],[4,3],[3,3],[3,4]],endPoint:[3,5]});this.levels.push({startPoint:[4,1],path:[[4,2],[4,3],[4,4],[3,4],[3,2],[2,2],[1,2],[1,3],[1,4]],endPoint:[2,4]}),console.log(this.levels)},t}(c)).instance=void 0,b=t((f=g).prototype,"mainGame",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(f.prototype,"levelSelect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"buttonBack",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./LevelManager.ts","./MapGenerated.ts","./MoveController.ts","./web.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapGenerated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelManager.ts"],(function(e){"use strict";var t,i,r,n,a,o,l,s,c,p,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Prefab,s=e.Node,c=e.instantiate,p=e.Vec3,h=e.Component},function(e){u=e.LevelManager}],execute:function(){var v,d,f,L,M,y,b,P,S,m,g,B,_,C;e("BlockType",void 0),a._RF.push({},"2aba7MT17hBdIg/s6Nuvdoa","MapGenerated",void 0);var O,z=o.ccclass,K=o.property;!function(e){e[e.START_BLOCK=0]="START_BLOCK",e[e.PATH_BLOCK=1]="PATH_BLOCK",e[e.END_BLOCK=2]="END_BLOCK",e[e.HIGH_BLOCK=3]="HIGH_BLOCK"}(O||(O=e("BlockType",{})));e("MapGenerated",(v=z("MapGenerated"),d=K({type:l}),f=K({type:l}),L=K({type:s}),M=K({type:s}),y=K({type:s}),v(((C=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"blocks",S,n(t)),r(t,"decors",m,n(t)),r(t,"tileMap",g,n(t)),r(t,"player",B,n(t)),r(t,"chest",_,n(t)),t.mapSize=7,t.currentLevel=void 0,t.levelMap=void 0,t.startMoving=!1,t.chestPos=void 0,t}i(t,e),t.GetInstance=function(){return this.instance};var a=t.prototype;return a.onLoad=function(){t.instance=this},a.onEnable=function(){this.SetLevel()},a.SetLevel=function(){u.GetInstance().OpenLevel(),this.currentLevel=u.GetInstance().levels[1],console.log(this.currentLevel),this.SetMap(),this.GenerateMap()},a.SetMap=function(){this.levelMap=Array.from({length:7},(function(){return Array.from({length:7})}));for(var e=0;e<this.mapSize;e++)for(var t=0;t<this.mapSize;t++)this.levelMap[e][t]=O.HIGH_BLOCK;this.levelMap[this.currentLevel.startPoint[0]][this.currentLevel.startPoint[1]]=O.START_BLOCK,this.levelMap[this.currentLevel.endPoint[0]][this.currentLevel.endPoint[1]]=O.END_BLOCK;for(var i=0;i<this.currentLevel.path.length;i++)this.levelMap[this.currentLevel.path[i][0]][this.currentLevel.path[i][1]]=O.PATH_BLOCK},a.GenerateMap=function(){for(var e=0;e<this.mapSize;e++)for(var t=0;t<this.mapSize;t++){var i=void 0,r=void 0;switch(this.levelMap[e][t]){case O.START_BLOCK:(i=c(this.blocks[0])).parent=this.tileMap;break;case O.PATH_BLOCK:(i=c(this.blocks[1])).parent=this.tileMap;break;case O.HIGH_BLOCK:var n=Math.floor(3*Math.random());(i=c(this.blocks[n+2])).parent=this.tileMap;var a=Math.floor(Math.random()*this.decors.length);(r=c(this.decors[a])).parent=i;var o=Math.random()+.5;r.setWorldScale(new p(o,o,1));break;case O.END_BLOCK:(i=c(this.blocks[1])).parent=this.tileMap}}},a.update=function(e){this.tileMap.children.length>0&&0!=this.tileMap.children[this.mapSize].position.x&&!this.startMoving&&this.SetPlayerStartPoint()},a.SetPlayerStartPoint=function(){var e=this.currentLevel.startPoint[0]*this.mapSize+this.currentLevel.startPoint[1],t=this.tileMap.children[e];this.player.setWorldPosition(t.worldPosition);var i=this.currentLevel.endPoint[0]*this.mapSize+this.currentLevel.endPoint[1],r=this.tileMap.children[i];this.chest.setWorldPosition(r.worldPosition)},a.SetPlayerPosition=function(e,t){var i=e*this.mapSize+t,r=this.tileMap.children[i];this.player.setWorldPosition(r.worldPosition)},a.GetLevelMap=function(){return this.levelMap},t}(h)).instance=void 0,S=t((P=C).prototype,"blocks",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(P.prototype,"decors",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(P.prototype,"tileMap",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(P.prototype,"player",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(P.prototype,"chest",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/MoveController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapGenerated.ts"],(function(t){"use strict";var e,o,n,s,i,r,a,c,h,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,a=t.Prefab,c=t.Node,h=t.instantiate,u=t.Component},function(t){l=t.MapGenerated,p=t.BlockType}],execute:function(){var v,R,T,P,f,M,d;i._RF.push({},"5c3c5daSIVPLp7akyPQKmsk","MoveController",void 0);var m,x=r.ccclass,y=r.property;!function(t){t[t.STAY=0]="STAY",t[t.FORWARD=1]="FORWARD",t[t.TURN_LEFT=2]="TURN_LEFT",t[t.TURN_RIGHT=3]="TURN_RIGHT"}(m||(m={}));t("MoveController",(v=x("MoveController"),R=y({type:a}),T=y({type:c}),v((M=e((f=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,n(e,"moveBlocks",M,s(e)),n(e,"stepMap",d,s(e)),e.currentPos=[0,0],e.rotation=[0,1],e.nextMove=m.STAY,e.nextPos=[0,0],e.nextRotation=[0,1],e.tempPos=[0,0],e.moves=void 0,e}o(e,t);var i=e.prototype;return i.start=function(){this.moves=[]},i.init=function(){this.currentPos=[0,0],this.rotation=[0,1],this.nextPos=[0,0],this.nextRotation=[0,1],this.currentPos=l.GetInstance().currentLevel.startPoint},i.update=function(t){},i.SetNextPosition=function(t){var e=l.GetInstance().GetLevelMap(),o=this.rotation[0],n=this.rotation[1];switch(t){case m.FORWARD:var s=[this.currentPos[0]+this.rotation[0],this.currentPos[1]+this.rotation[1]];e[s[0]][s[1]]==p.PATH_BLOCK&&(this.nextPos=s,l.GetInstance().SetPlayerPosition(this.nextPos[0],this.nextPos[1]),this.currentPos=this.nextPos);break;case m.TURN_LEFT:this.nextRotation[0]=-n,this.nextRotation[1]=o,this.rotation=this.nextRotation;break;case m.TURN_RIGHT:this.nextRotation[0]=n,this.nextRotation[1]=-o,this.rotation=this.nextRotation}},i.ResetMove=function(){this.stepMap.destroyAllChildren(),this.moves=[],l.GetInstance().startMoving=!1,this.init()},i.MoveForward=function(){this.moves.push(m.FORWARD),this.AddMove(m.FORWARD)},i.TurnLeft=function(){this.moves.push(m.TURN_LEFT),this.AddMove(m.TURN_LEFT)},i.TurnRight=function(){this.moves.push(m.TURN_RIGHT),this.AddMove(m.TURN_RIGHT)},i.PlayMove=function(){this.currentPos=l.GetInstance().currentLevel.startPoint,this.nextPos=this.currentPos,l.GetInstance().startMoving=!0;l.GetInstance().GetLevelMap();for(var t=0;t<this.moves.length;t++)this.tempPos=this.currentPos,this.SetNextPosition(this.moves[t])},i.AddMove=function(t){switch(t){case m.FORWARD:h(this.moveBlocks[0]).parent=this.stepMap;break;case m.TURN_LEFT:h(this.moveBlocks[1]).parent=this.stepMap;break;case m.TURN_RIGHT:h(this.moveBlocks[2]).parent=this.stepMap}},e}(u)).prototype,"moveBlocks",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=e(f.prototype,"stepMap",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=f))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/web.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,c,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,a=e.Node,l=e.WebView,u=e.Component}],execute:function(){var p,s,b,w,m,f,h;o._RF.push({},"b78c3jm3lNHbbtCWIsHB/Uh","web",void 0);var y=c.ccclass,v=c.property;e("web",(p=y("web"),s=v({type:a}),b=v({type:a}),p((f=t((m=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(t,"webView",f,r(t)),n(t,"mmm",h,r(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.webView.active=!1},o.update=function(e){},o.onNavigate=function(){this.webView.active=!0,console.log("open link"),this.webView.getComponent(l).url="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzA4OTA2NDc2Mg==#wechat_redirect"},o.hide=function(){this.mmm.active=!0},t}(u)).prototype,"webView",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(m.prototype,"mmm",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=m))||w));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});